_hash="c5cee8cc9e9b13784272550ab0938175cec1cdb5"
pkgname=openiboot
pkgver=0.3
pkgrel=0
pkgdesc="Open bootloader for Apple devices"
url="https://github.com/iDroid-Project/openiBoot"
arch="armhf"
license="GPL3"
depends=""
makedepends="texinfo scons openssl-dev libpng-dev curl-dev libusb-dev readline-dev musl-dev"
subpackages=""
source="
    $pkgname.tar.gz::https://github.com/iDroid-Project/openiBoot/archive/${_hash}.tar.gz
    gnu-inline.patch
    disable-thumb.patch
    disable-werror.patch
"
options="!check"

builddir="$srcdir"/openiBoot-${_hash}
build() {
    cd "$builddir"

    CROSS=$CROSS_COMPILE \
    scons iPodTouch1G
}

package() {
    return 0
}

sha512sums="dbd35f0dc158757c174f68f15fe779397aadc6b238e0385ebd85ea16bec361fdb7b89dc124555da56a158c8b8fb7468c2536d7ccd89f8cb619b86ab3b957211e  openiboot.tar.gz
799f930aa33d54c061a5c84ed60205a4d2f6a65caa0e80288694c626154faf6e09b1688c4e93996af5b1ac52bb1ef2b1e4269b738a4aac52bcf17f9643b9be81  gnu-inline.patch
061cf38d6ef841e5657ff9536aab0bc714617bfee4a4ce08d108b838ad6304160d1581c311332d281a506308eccfb9a75dc1886ea819d4345db017d14b365453  disable-thumb.patch
4d7ab7e6a5336de044f1811a6de0e33d45b71bbf00616ca9767f7c753b657d8fe9761aebc05619b03eaab9f42bb60439c2d163b81900c1e7fee69cae027bb33d  disable-werror.patch"
